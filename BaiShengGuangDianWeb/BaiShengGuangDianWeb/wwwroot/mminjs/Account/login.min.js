$(function(){var t,n,i;pcAndroid()||($("#scanning").addClass("hidden"),$(".glyphicon-user").css({right:0,top:0}));$("input").iCheck({checkboxClass:"icheckbox_square-blue",radioClass:"iradio_square-blue",increaseArea:"20%"});t=n=>{var r,u,t,i,o;if(n.errno!=0){layer.msg(n.errmsg);return}if(r=n.datas,u=GetCookie(lastLocation),!isStrEmptyOrUndefined(u)){DelCookie(lastLocation);window.location.href=u;return}var f=indexUrl,e=!1,s=["工作台","维修管理","系统管理","设备管理","设备点检","流程卡管理","工艺管理","生产管理","计划管理","物料管理","6s检查","数据统计","权限管理"];for(t=0;t<s.length;t++){if(e)break;for(i=0;i<r.length;i++){if(e&&!isStrEmptyOrUndefined(f))break;o=r[i];o.label==s[t]&&(f=o.url,e=!0)}}window.location.href=f};$("#loginBtn").click(function(){var r=$("#account").val(),n,u,i;if(isStrEmptyOrUndefined(r)){showTip($("#accountTip"),"账号不能为空");return}if(n={},u="",r.substr(-2)==",,")n.number=r.slice(0,-2),u="/Account/NumberLogin";else{if(i=$("#password").val(),isStrEmptyOrUndefined(i)){showTip($("#passwordTip"),"密码不能为空");return}var f=$("#rememberMe").is(":checked"),e=GetCookie("p"),o=e!=i?window.md5(i):i;n.account=r;n.password=o;n.rememberMe=f;u="/Account/Login"}ajaxPost(u,n,t)});n=getQueryString("acc");i=getQueryString("pwd");isStrEmptyOrUndefined(n)||isStrEmptyOrUndefined(n)||($("#account").val(n),$("#password").val(i),$("#loginBtn").click());$(document).keydown(function(n){if(n.keyCode===13)$("#loginBtn").click();else if($("#password").is(":focus")){var t=$("#password").val();t.indexOf(",")!=-1&&$("#account").val(`${t},`)}else $("#account").trigger("focus")});$("#account").on("input",function(){$(this).trigger("blur").trigger("focus")});$("#scanning").on("click",()=>{new Promise(n=>{showPrintModal(n)}).then(n=>{n&&ajaxPost("/Account/NumberLogin",{number:n.slice(0,-2)},t)})})});