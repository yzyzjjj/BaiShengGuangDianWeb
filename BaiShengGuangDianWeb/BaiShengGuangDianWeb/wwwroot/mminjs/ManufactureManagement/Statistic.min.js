function pageReady(){var n,t;$(".ms2").select2();getWorkGroup();n=getMonthScope();$("#sTime,#plansTime").val(n.start).datepicker("update");$("#eTime,#planeTime").val(n.end).datepicker("update");t=()=>{var n=new Date;return()=>{var t=new Date;t-n>=200&&(echarts.init($("#performance_chart")[0]).resize(),n=t)}};$("#performance_chart").on("resize",t());$("#plan_li").one("click",()=>getPlan());$("#planAll").on("ifChanged",function(){$(this).is(":checked")?$("#planItem .icb_minimal").iCheck("check"):_planTime.length==$("#planItem").children().length&&$("#planItem .icb_minimal").iCheck("uncheck")});$("#planItem").on("ifChanged",".icb_minimal",function(){var n=$(this).val();$(this).is(":checked")?(_planTime.push(n),_planTime.length==$("#planItem").children().length&&$("#planAll").iCheck("check")):(_planTime.splice(_planTime.indexOf(n),1),_planTime.length==$("#planItem").children().length-1&&$("#planAll").iCheck("uncheck"))})}function foldList(n){$(n).toggleClass("hidden");$(this).toggleClass("glyphicon-triangle-left glyphicon-triangle-right").prop("title",$(n).is(":hidden")?"展开":"收起")}function getWorkGroup(){var n={};n.opType=1077;n.opData=JSON.stringify({menu:!0});ajaxPost("/Relay/Post",n,n=>{var t,f,i;if(n.errno!=0){layer.msg(n.errmsg);return}$(".work-group").empty();var r=n.datas,u="";for(t=0,f=r.length;t<f;t++)i=r[t],u+='<option value="{0}">{1}<\/option>'.format(i.Id,i.Group);$(".work-group").append(u)})}function getPlan(){var n={};n.opType=1039;ajaxPost("/Relay/Post",n,n=>{var t,f,i;if(n.errno!=0){layer.msg(n.errmsg);return}$("#planItem").empty();var r=n.datas,u="";for(t=0,f=r.length;t<f;t++)i=r[t],u+='<label class="flexStyle pointer"><input type="checkbox" class="icb_minimal" value="{0}"><span class="textOverTop" style="margin-left: 5px" title="{1}">{1}<\/span><\/label>'.format(i.Id,i.Plan);$("#planItem").append(u);$("#planItem .icb_minimal").iCheck({handle:"checkbox",checkboxClass:"icheckbox_minimal-green",increaseArea:"20%"})})}function getPerformanceChart(){var r=$("#workGroupSelect").val(),n,t,i;if(isStrEmptyOrUndefined(r)){layer.msg("请选择工作组");return}if(n=$("#sTime").val().trim(),t=$("#eTime").val().trim(),isStrEmptyOrUndefined(n)){layer.msg("请选择开始时间");return}if(isStrEmptyOrUndefined(t)){layer.msg("请选择结束时间");return}if(compareDate(n,t)){layer.msg("开始时间不能大于结束时间");return}n=`${n} 00:00:00`;t=`${t} 23:59:59`;i={};i.opType=1098;i.opData=JSON.stringify({gId:r,sTime:n,eTime:t});ajaxPost("/Relay/Post",i,n=>{var t,e,i,o;if(n.errno!=0){layer.msg(n.errmsg);$("#performance_chart").addClass("hidden");return}$("#performance_chart").removeClass("hidden");var r=n.datas,u=[],f=[];for(t=0,e=r.length;t<e;t++)i=r[t],u.push(i.Processor),f.push(i.Score);o={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"3%",top:"6%",bottom:"8%",containLabel:!0},xAxis:{type:"category",data:u},yAxis:{type:"value"},series:{name:"绩效",type:"bar",barWidth:"60%",label:{show:!0,position:"top"},data:f},dataZoom:[{type:"inside"},{handleIcon:_handleIcon,handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],toolbox:{left:"center",feature:{dataZoom:{yAxisIndex:"none"},restore:{}}}};echarts.init($("#performance_chart")[0]).setOption(o)})}function getPlanTimeChart(){var r=$("#planGroupSelect").val(),n,t,u,i;if(isStrEmptyOrUndefined(r)){layer.msg("请选择工作组");return}if(n=$("#plansTime").val().trim(),t=$("#plansTime").val().trim(),isStrEmptyOrUndefined(n)){layer.msg("请选择开始时间");return}if(isStrEmptyOrUndefined(t)){layer.msg("请选择结束时间");return}if(compareDate(n,t)){layer.msg("开始时间不能大于结束时间");return}if(n=`${n} 00:00:00`,t=`${t} 23:59:59`,!_planTime.length){layer.msg("请勾选计划号");return}u=_planTime.join(",");i={};i.opType=1099;i.opData=JSON.stringify({gId:r,sTime:n,eTime:t,planId:u});ajaxPost("/Relay/Post",i,n=>{if(n.errno!=0){layer.msg(n.errmsg);$("#plan_chart").addClass("hidden");return}$("#plan_chart").removeClass("hidden")})}function getTaskTimeChart(){}var _planTime=[];