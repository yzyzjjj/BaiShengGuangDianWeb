function pageReady(){$(".ms2").select2();getTaskConfig()}function getTaskConfig(){var t=1051,n;if(!checkPermission(t)){layer.msg("没有权限");return}n={};n.opType=t;ajaxPost("/Relay/Post",n,function(n){var t,f,i;if(n.errno!=0){layer.msg(n.errmsg);return}var r=n.datas,u="";for(t=0,f=r.length;t<f;t++)i=r[t],u+='<option value = "{0}">{1}<\/option>'.format(i.Id,i.Task);$("#selectConfig").empty();$("#selectConfig").append(u);getTaskConfigItem()})}function getGroup(n){var i=1077,t;if(!checkPermission(i)){layer.msg("没有权限");return}t={};t.opType=i;t.opData=JSON.stringify({menu:!0});ajaxPost("/Relay/Post",t,function(t){var i,e,r;if(t.errno!=0){layer.msg(t.errmsg);return}var u=t.datas,f="";for(i=0,e=u.length;i<e;i++)r=u[i],f+='<option value = "{0}">{1}<\/option>'.format(r.Id,r.Group);n!=null&&n(f)})}function getProcessor(n,t){var r=1081,i;if(!checkPermission(r)){layer.msg("没有权限");return}i={};i.opType=r;i.opData=JSON.stringify({groupId:t,menu:!0});ajaxPost("/Relay/Post",i,function(t){var i,e,r;if(t.errno!=0){layer.msg(t.errmsg);return}var u=t.datas,f="";for(i=0,e=u.length;i<e;i++)r=u[i],f+='<option value = "{0}">{1}<\/option>'.format(r.ProcessorId,r.Processor);n!=null&&n(f)})}function getModule(n){var i=1058,t;if(!checkPermission(i)){layer.msg("没有权限");return}t={};t.opType=i;t.opData=JSON.stringify({menu:!0});ajaxPost("/Relay/Post",t,function(t){var i,e,r;if(t.errno!=0){layer.msg(t.errmsg);return}var u=t.datas,f="";for(i=0,e=u.length;i<e;i++)r=u[i],f+='<option value = "{0}">{1}<\/option>'.format(r.Id,r.Module);n!=null&&n(f)})}function setTableStyle(){$("#configItem").find(".isEnable").iCheck({handle:"checkbox",checkboxClass:"icheckbox_minimal-blue",increaseArea:"20%"})}function getTaskConfigItem(){var i=1055,t,n;if(!checkPermission(i)){layer.msg("没有权限");return}(t=$("#selectConfig").val(),isStrEmptyOrUndefined(t))||(n={},n.opType=i,n.opData=JSON.stringify({taskId:t}),ajaxPost("/Relay/Post",n,function(t){if(t.errno!=0){layer.msg(t.errmsg);return}n=t.datas;var i=new Promise(function(n){getGroup(n)}),r=new Promise(function(n){getProcessor(n,0)}),u=new Promise(function(n){getModule(n)});Promise.all([i,r,u]).then(function(t){for(var i,f=`<tr>
            <td><input type="checkbox" class="icb_minimal isEnable"></td>
            <td class="num">{0}</td>
            <td>
            <span class="textOn">{1}</span>
            <div class="flexStyle textIn hidden"><select class="ms2 form-control" style="width: 120px">${t[0]}</select><select class="ms2 form-control" style="width: 120px;margin-left:3px">${t[1]}</select></div>
            </td>
            <td><span class="textOn">{2}</span><select class="ms2 form-control textIn hidden" style="width: 120px">${t[2]}</select></td>
            <td><span class="textOn">{3}</span></td>
            <td><span class="textOn">{4}</span><input type="text" class="form-control text-center textIn hidden" maxlength="10" oninput="value=value.replace(/[^\d]/g,'')" style="width:80px"></td>
            <td><span class="textOn">{5}</span><input type="text" class="form-control text-center textIn hidden" maxlength="10" oninput="value=value.replace(/[^\d]/g,'')" style="width:80px"></td>
            <td><span class="textOn">{6}</span><textarea class="form-control textIn hidden" maxlength="500" style="resize: vertical;width:180px"></textarea></td>
            <td><span class="textOn">{7}</span><input type="text" class="form-control text-center textIn hidden" maxlength="10" oninput="value=value.replace(/[^\d]/g,'')" style="width:80px"></td>
            <td><button type="button" class="btn btn-primary btn-sm">上移</button></td>
            </tr>`,u="",r=0,e=n.length;r<e;r++)i=n[r],u+=f.format(r+1,i.Processor,i.Module,i.Item,i.EstimatedTime,i.Score,i.Desc,i.Relation);$("#configItem").empty();$("#configItem").append(u);setTableStyle()})}))}