function pageReady(){$(".ms2").select2();idStr=getQueryString("id");getCodeList();$("#selectCode").on("select2:select",function(){getVarTypeList()})}function getCodeList(){var t=100,n;if(!checkPermission(t)){layer.msg("没有权限");return}n={};n.opType=t;n.opData=JSON.stringify({hard:!0});ajaxPost("/Relay/Post",n,function(n){var i,r;if(n.errno!=0){layer.msg(n.errmsg);return}$("#selectCode").empty();for(var f=n.datas.length,u="",t=0;t<f;t++)i=n.datas[t],r=i.DeviceStateStr,(r=="待加工"||r=="加工中")&&(u+='<option value="{0}">{1}<\/option>'.format(i.Id,i.Code));$("#selectCode").append(u);idStr!=null&&$("#selectCode").val(idStr).trigger("change");getVarTypeList()})}function getVarTypeList(){var i=164,t,n;if(!checkPermission(i)){layer.msg("没有权限");return}(t=$("#selectCode").val(),isStrEmptyOrUndefined(t))||(n={},n.opType=i,n.opData=JSON.stringify({DeviceId:t}),ajaxPost("/Relay/Post",n,function(n){var r,t,u,i;if(n.errno!=0){layer.msg(n.errmsg);return}for($("#selectVarType").empty(),r='<option value="{0}">{1}<\/option>',u=n.datas.length,t=0;t<u;t++)i=n.datas[t],$("#selectVarType").append(r.format(i.Id,i.VariableName))}))}function setCodeVarPar(){var u=165,i,r,n,t;if(!checkPermission(u)){layer.msg("没有权限");return}if(i=$("#selectCode").val(),isStrEmptyOrUndefined(i)){layer.msg("请选择设备");return}if(r=$("#selectVarType").val(),isStrEmptyOrUndefined(r)){layer.msg("变量类型");return}if(n=$("#resetValue").val().trim(),isStrEmptyOrUndefined(n)){layer.msg("请输入重置值");return}if(parseInt(n)!=n){layer.msg("请输入正确的数值");return}t={};t.opType=u;t.opData=JSON.stringify({DeviceId:i,UsuallyDictionaryId:r,Value:n});ajaxPost("/Relay/Post",t,function(n){layer.msg(n.errmsg)})}function getDataList(){}function openDevice(){}function closeDevice(){}function lockDevice(){}function unlockDevice(){}var idStr;