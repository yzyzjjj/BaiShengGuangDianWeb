function pageReady(){_permissionList[174]={uIds:["setCodeVarParBtn"]};_permissionList=checkPermissionUi(_permissionList);$(".ms2").select2();idStr=getQueryString("id");getCodeList();$("#selectCode").on("select2:select",function(){getVarTypeList()})}function getCodeList(){var n={};n.opType=100;n.opData=JSON.stringify({detail:!0,state:!0});ajaxPost("/Relay/Post",n,function(n){var i,r;if(n.errno!=0){layer.msg(n.errmsg);return}n.datas.sort((n,t)=>n.Code-t.Code);$("#selectCode").empty();for(var f=n.datas.length,u="",t=0;t<f;t++)i=n.datas[t],r=i.DeviceStateStr,(r=="待机"||r=="加工中")&&(u+='<option value="{0}">{1}<\/option>'.format(i.Id,i.Code));$("#selectCode").append(u);idStr!=null&&$("#selectCode").val(idStr).trigger("change");getVarTypeList()})}function getVarTypeList(){var t=$("#selectCode").val(),n;isStrEmptyOrUndefined(t)||(n={},n.opType=164,n.opData=JSON.stringify({DeviceId:t}),ajaxPost("/Relay/Post",n,function(n){var r,t,u,i;if(n.errno!=0){layer.msg(n.errmsg);return}for($("#selectVarType").empty(),r='<option value="{0}">{1}<\/option>',u=n.datas.length,t=0;t<u;t++)i=n.datas[t],$("#selectVarType").append(r.format(i.Id,i.VariableName))}))}function setCodeVarPar(){var r=$("#selectCode").val(),i,n,t;if(isStrEmptyOrUndefined(r)){layer.msg("请选择设备");return}if(i=$("#selectVarType").val(),isStrEmptyOrUndefined(i)){layer.msg("变量类型");return}if(n=$("#resetValue").val().trim(),isStrEmptyOrUndefined(n)){layer.msg("请输入重置值");return}if(parseInt(n)!=n){layer.msg("请输入正确的数值");return}t={};t.opType=165;t.opData=JSON.stringify({DeviceId:r,UsuallyDictionaryId:i,Value:n});ajaxPost("/Relay/Post",t,function(n){layer.msg(n.errmsg)})}function getDataList(){}function openDevice(){}function closeDevice(){}function lockDevice(){}function unlockDevice(){}var _permissionList=[],idStr;