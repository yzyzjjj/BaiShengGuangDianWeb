function pageReady(){_permissionList[186]={uIds:["showAddCategory"]};_permissionList[187]={uIds:[]};_permissionList[188]={uIds:[]};_permissionList=checkPermissionUi(_permissionList);getCategoryList()}function getCategoryList(){ajaxPost("/Relay/Post",{opType:140},function(n){if(n.errno!=0){layer.msg(n.errmsg);return}var t=_permissionList[187].have,i=_permissionList[188].have,r=function(n,t,i,r){return++r.row},u=function(n,t,i){return i.Description=i.Description?i.Description:"",i.Description.length>tdShowContentLength?i.Description.substr(0,tdShowContentLength)+'<a href = "javascript:showDescriptionModel({0})">...全部显示<\/a> '.format(i.Id):i.Description},f=function(n){var r="<li><a onclick=\"showUpdateCategory({0}, '{1}', '{2}')\">修改<\/a><\/li>".format(n.Id,escape(n.CategoryName),escape(n.Description)),u="<li><a onclick=\"deleteCategory({0}, '{1}')\">删除<\/a><\/li>".format(n.Id,escape(n.CategoryName));return'<div class="btn-group"><button type = "button" class="btn btn-default" data-toggle="dropdown" aria-expanded="false"> <i class="fa fa-asterisk"><\/i>操作<\/button >    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">        <span class="caret"><\/span>        <span class="sr-only">Toggle Dropdown<\/span>    <\/button>    <ul class="dropdown-menu" role="menu" style="cursor:pointer">{0}{1}    <\/ul><\/div>'.format(t?r:"",i?u:"")},e=t||i?[{data:null,title:"序号",render:r},{data:"Id",title:"Id",bVisible:!1},{data:"CategoryName",title:"类型名"},{data:"Description",title:"描述",render:u},{data:null,title:"操作",render:f,orderable:!1}]:[{data:null,title:"序号",render:r},{data:"Id",title:"Id",bVisible:!1},{data:"CategoryName",title:"类型名"},{data:"Description",title:"描述",render:u}];$("#categoryList").DataTable({dom:'<"pull-left"l><"pull-right"f>rt<"col-sm-5"i><"col-sm-7"p>',destroy:!0,paging:!0,searching:!0,language:oLanguage,data:n.datas,aLengthMenu:[20,40,60],iDisplayLength:20,columns:e})})}function showDescriptionModel(n){var t={};t.opType=140;t.opData=JSON.stringify({id:n});ajaxPost("/Relay/Post",t,function(n){if(n.errno!=0){layer.msg(n.errmsg);return}n.datas.length>0&&$("#description").html(n.datas[0].Description);$("#descriptionModel").modal("show")})}function showAddCategory(){hideClassTip("adt");$("#addCategoryName").val("");$("#addCategoryDesc").val("");$("#addModel").modal("show")}function addCategory(){var n=$("#addCategoryName").val().trim(),i=$("#addCategoryDesc").val(),t;if(isStrEmptyOrUndefined(n)){showTip($("#addCategoryNameTip"),"类型名不能为空");return}t=function(){$("#addModel").modal("hide");var t={};t.opType=143;t.opData=JSON.stringify({CategoryName:n,Description:i});ajaxPost("/Relay/Post",t,function(n){layer.msg(n.errmsg);n.errno==0&&getCategoryList()})};showConfirm("添加",t)}function deleteCategory(n,t){t=unescape(t);var i=function(){var t={};t.opType=144;t.opData=JSON.stringify({id:n});ajaxPost("/Relay/Post",t,function(n){layer.msg(n.errmsg);n.errno==0&&getCategoryList()})};showConfirm("删除类型："+t,i)}function showUpdateCategory(n,t,i){t=unescape(t);i=unescape(i);hideClassTip("adt");$("#updateId").html(n);$("#updateCategoryName").val(t);$("#updateCategoryDesc").val(i);$("#updateCategory").modal("show")}function updateCategory(){var i=parseInt($("#updateId").html()),n=$("#updateCategoryName").val().trim(),r=$("#updateCategoryDesc").val(),t;if(isStrEmptyOrUndefined(n)){showTip($("#updateCategoryNameTip"),"类型名不能为空");return}t=function(){$("#updateCategory").modal("hide");var t={};t.opType=142;t.opData=JSON.stringify({id:i,CategoryName:n,Description:r});ajaxPost("/Relay/Post",t,function(n){layer.msg(n.errmsg);n.errno==0&&getCategoryList()})};showConfirm("修改",t)}var _permissionList=[];