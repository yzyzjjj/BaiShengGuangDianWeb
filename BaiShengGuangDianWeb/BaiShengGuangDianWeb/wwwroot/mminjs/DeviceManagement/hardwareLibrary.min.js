function pageReady(){getHardwareList();checkPermission(138)||$("#showAddHardwareModal").addClass("hidden")}function getHardwareList(){var n=135;if(!checkPermission(n)){layer.msg("没有权限");return}ajaxPost("/Relay/Post",{opType:n},function(n){if(n.errno!=0){layer.msg(n.errmsg);return}var r=0,t=function(){return++r},u=checkPermission(137)||checkPermission(139)?[{data:null,title:"序号",render:t},{data:"Id",title:"Id",bVisible:!1},{data:"HardwareName",title:"版本名称"},{data:"InputNumber",title:"输入口数量"},{data:"OutputNumber",title:"输出口数量"},{data:"DacNumber",title:"数模转换数量"},{data:"AdcNumber",title:"模数转换数量"},{data:"AxisNumber",title:"主轴数量"},{data:"ComNumber",title:"通用串口数量"},{data:"Description",title:"描述"},{data:null,title:"操作",render:op}]:[{data:null,title:"序号",render:t},{data:"Id",title:"Id",bVisible:!1},{data:"HardwareName",title:"版本名称"},{data:"InputNumber",title:"输入口数量"},{data:"OutputNumber",title:"输出口数量"},{data:"DacNumber",title:"数模转换数量"},{data:"AdcNumber",title:"模数转换数量"},{data:"AxisNumber",title:"主轴数量"},{data:"ComNumber",title:"通用串口数量"},{data:"Description",title:"描述"}],i=function(n,t,i){return i.Description=i.Description?i.Description:"",i.Description.length>tdShowContentLength?i.Description.substr(0,tdShowContentLength)+'<a href = "javascript:showDescriptionModel({0})">...<\/a> '.format(i.Id):i.Description},f=checkPermission(137)||checkPermission(139)?[{orderable:!1,targets:10},{targets:[9],render:i}]:[{targets:[9],render:i}];$("#hardwareList").DataTable({destroy:!0,paging:!0,searching:!0,language:oLanguage,data:n.datas,aLengthMenu:[20,40,60],iDisplayLength:20,columns:u,columnDefs:f})})}function showDescriptionModel(n){var i=135,t;if(!checkPermission(i)){layer.msg("没有权限");return}t={};t.opType=i;t.opData=JSON.stringify({id:n});ajaxPost("/Relay/Post",t,function(n){if(n.errno!=0){layer.msg(n.errmsg);return}n.datas.length>0&&$("#description").html(n.datas[0].Description);$("#descriptionModel").modal("show")})}function showAddHardwareModal(){hideClassTip("adt");$(".dd").val("");$("#addModel").modal("show")}function addHardware(){var n=138,s;if(!checkPermission(n)){layer.msg("没有权限");return}var t=$("#addHardwareName").val().trim(),i=$("#addInputNumber").val().trim(),r=$("#addOutputNumber").val().trim(),u=$("#addDacNumber").val().trim(),f=$("#addAdcNumber").val().trim(),e=$("#addAxisNumber").val().trim(),o=$("#addComNumber").val().trim(),h=$("#addDescription").val();if(isStrEmptyOrUndefined(t)){showTip($("#addHardwareNameTip"),"名称不能为空");return}if(isStrEmptyOrUndefined(i)){showTip($("#addInputNumberTip"),"输入口数量不能为空");return}if(isStrEmptyOrUndefined(r)){showTip($("#addOutputNumberTip"),"输出口数量不能为空");return}if(isStrEmptyOrUndefined(u)){showTip($("#addDacNumberTip"),"数模转换数量不能为空");return}if(isStrEmptyOrUndefined(f)){showTip($("#addAdcNumberTip"),"模数转换数量不能为空");return}if(isStrEmptyOrUndefined(e)){showTip($("#addAxisNumberTip"),"主轴数量不能为空");return}if(isStrEmptyOrUndefined(o)){showTip($("#addComNumberTip"),"通用串口数量不能为空");return}s=function(){$("#addModel").modal("hide");var s={};s.opType=n;s.opData=JSON.stringify({HardwareName:t,InputNumber:i,OutputNumber:r,DacNumber:u,AdcNumber:f,AxisNumber:e,ComNumber:o,Description:h});ajaxPost("/Relay/Post",s,function(n){layer.msg(n.errmsg);n.errno==0&&getHardwareList()})};showConfirm("添加",s)}function deleteHardware(n,t){var i,r;if(t=unescape(t),i=139,!checkPermission(i)){layer.msg("没有权限");return}r=function(){var t={};t.opType=i;t.opData=JSON.stringify({id:n});ajaxPost("/Relay/Post",t,function(n){layer.msg(n.errmsg);n.errno==0&&getHardwareList()})};showConfirm("删除硬件："+t,r)}function showUpdateHardware(n,t,i,r,u,f,e,o,s){t=unescape(t);s=unescape(s);hideClassTip("adt");$(".dd").val("");$("#updateId").html(n);$("#updateHardwareName").val(t);$("#updateInputNumber").val(i);$("#updateOutputNumber").val(r);$("#updateDacNumber").val(u);$("#updateAdcNumber").val(f);$("#updateAxisNumber").val(e);$("#updateComNumber").val(o);$("#updateDescription").val(s);$("#updateHardwareModal").modal("show")}function updateHardware(){var n=137,s;if(!checkPermission(n)){layer.msg("没有权限");return}var h=parseInt($("#updateId").html()),t=$("#updateHardwareName").val().trim(),i=$("#updateInputNumber").val().trim(),r=$("#updateOutputNumber").val().trim(),u=$("#updateDacNumber").val().trim(),f=$("#updateAdcNumber").val().trim(),e=$("#updateAxisNumber").val().trim(),o=$("#updateComNumber").val().trim(),c=$("#updateDescription").val();if(isStrEmptyOrUndefined(t)){showTip($("#updateHardwareNameTip"),"名称不能为空");return}if(isStrEmptyOrUndefined(i)){showTip($("#updateInputNumberTip"),"输入口数量不能为空");return}if(isStrEmptyOrUndefined(r)){showTip($("#updateOutputNumberTip"),"输出口数量不能为空");return}if(isStrEmptyOrUndefined(u)){showTip($("#updateDacNumberTip"),"数模转换数量不能为空");return}if(isStrEmptyOrUndefined(f)){showTip($("#updateAdcNumberTip"),"模数转换数量不能为空");return}if(isStrEmptyOrUndefined(e)){showTip($("#updateAxisNumberTip"),"主轴数量不能为空");return}if(isStrEmptyOrUndefined(o)){showTip($("#updateComNumberTip"),"通用串口数量不能为空");return}s=function(){$("#updateHardwareModal").modal("hide");var s={};s.opType=n;s.opData=JSON.stringify({id:h,HardwareName:t,InputNumber:i,OutputNumber:r,DacNumber:u,AdcNumber:f,AxisNumber:e,ComNumber:o,Description:c});ajaxPost("/Relay/Post",s,function(n){layer.msg(n.errmsg);n.errno==0&&getHardwareList()})};showConfirm("修改",s)}var op=function(n){var t="<li><a onclick=\"showUpdateHardware({0}, '{1}', '{2}', '{3}', '{4}', '{5}', '{6}', '{7}', '{8}')\">修改<\/a><\/li>".format(n.Id,escape(n.HardwareName),n.InputNumber,n.OutputNumber,n.DacNumber,n.AdcNumber,n.AxisNumber,n.ComNumber,escape(n.Description)),i="<li><a onclick=\"deleteHardware({0}, '{1}')\">删除<\/a><\/li>".format(n.Id,escape(n.HardwareName));return'<div class="btn-group"><button type = "button" class="btn btn-default" data-toggle="dropdown" aria-expanded="false"> <i class="fa fa-asterisk"><\/i>操作<\/button >    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">        <span class="caret"><\/span>        <span class="sr-only">Toggle Dropdown<\/span>    <\/button>    <ul class="dropdown-menu" role="menu" style="cursor:pointer">{0}{1}    <\/ul><\/div>'.format(checkPermission(137)?t:"",checkPermission(139)?i:"")};