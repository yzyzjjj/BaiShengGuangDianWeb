function pageReady(){_permissionList[744]={uIds:["delPermission"]};_permissionList=checkPermissionUi(_permissionList);getPermissionsList()}function getPermissionsList(){delList=[];$("#permissionsList").empty();ajaxGet("/Account/Permissions",null,function(n){if(n.errno!=0){layer.msg(n.errmsg);return}var r=function(n){return'<input type="checkbox" value="{0},{1}" name="chkItem" class="icb_minimal" onclick="">'.format(n.id,n.name)},t=function(n,t,i,r){return++r.row},i=_permissionList[744].have,u=i?[{data:null,title:"请选择",render:r,orderable:!1},{data:null,title:"序号",render:t},{data:"name",title:"Name"},{data:"isPage",title:"IsPage"},{data:"type",title:"Type"},{data:"label",title:"Label"}]:[{data:null,title:"序号",render:t},{data:"name",title:"Name"},{data:"isPage",title:"IsPage"},{data:"type",title:"Type"},{data:"label",title:"Label"}];$("#permissionsList").DataTable({dom:'<"pull-left"l><"pull-right"f>rt<"col-sm-5"i><"col-sm-7"p>',destroy:!0,paging:!0,searching:!0,language:oLanguage,data:n.datas,aaSorting:[[i?1:0,"asc"]],aLengthMenu:[15,30,60],iDisplayLength:15,columns:u,drawCallback:function(){$("#permissionsList .icb_minimal").iCheck({handle:"checkbox",checkboxClass:"icheckbox_minimal-red",radioClass:"iradio_minimal-red",increaseArea:"20%"});$("#permissionsList .icb_minimal").on("ifChanged",function(){var n=$(this),t=n.attr("value");n.is(":checked")?delList.push(t):(n.parents("tr:first").hasClass("odd"),delList.splice(delList.indexOf(t),1))})}})})}function delPermission(){for(var f=delList.join(),t=f.split(","),i=[],r=[],n=0;n<t.length;n++)n%2==0?i.push(t[n]):r.push(t[n].trim());var u=i.join(","),e=r.join("<br>"),o=function(){var n={};n.permission=u;ajaxPost("/Account/DeletePermission",n,function(n){layer.msg(n.errmsg);n.errno==0&&getPermissionsList()})};isStrEmptyOrUndefined(u)?layer.msg("请选择要删除的数据"):showConfirm(`删除以下权限:<pre style='color:red'>${e}</pre>`,o)}function updateAdministrator(){ajaxPost("/Relay/Post",{opType:92},n=>{if(n.errno!=0){layer.msg(n.errmsg);return}})}var _permissionList=[],delList=null;