function isPhone(n){return isNaN(n)?!1:/^1[0-9]{10}$/i.test(n)}function isEmail(n){return/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(n)?!0:!1}function isStrEmptyOrUndefined(n){return n==""?!0:n==undefined?!0:!1}function isMac(n){return/^[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}$/.test(n)||/^[A-Fa-f\d]{2}-[A-Fa-f\d]{2}-[A-Fa-f\d]{2}-[A-Fa-f\d]{2}-[A-Fa-f\d]{2}-[A-Fa-f\d]{2}$/.test(n)?!0:!1}function isIp(n){var t=n.match(/^((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))$/);return t==null?!1:!0}function isPort(n){return n<0||n>65536?!1:!0}function isNumber(n){if(n===undefined||n===null||n==="")return!1;if(typeof n=="string")return/^\d+$/.test(n)||/^-\d+$/.test(n)||/^[1-9]\d*[.]\d+$/.test(n)||/^0[.]\d+$/.test(n)||/^-[1-9]\d*[.]\d+$/.test(n)||/^-0[.]\d+$/.test(n)?!0:!1;return typeof n=="number"?!0:!1}function getJwtInfo(n){if(isStrEmptyOrUndefined(n))return null;var r=n.split("."),u=r[1],f=Base64.decode(u),t=JSON.parse(f),i=GetCookie("per");return t.permissionsList=isStrEmptyOrUndefined(i)?[]:i.split(",").map(Number),t.proleList=isStrEmptyOrUndefined(t.prole)?[]:t.prole.split(",").map(Number),t}function getCookieTokenInfo(){var n=GetCookie("token");return getJwtInfo(n)}function isTokenValid(){var n=getCookieTokenInfo(),t;return n==null?!1:(t=(new Date).getTime()/1e3,t>n.exp)?!1:!0}function checkPermission(n){var t=getCookieTokenInfo();return t!=null&&isTokenValid()?t.permissionsList.indexOf(n)>=0:(SetCookie(lastLocation,window.location.pathname),window.location.href=loginUrl,-1)}function checkPermissionUi(n){var r,u,t,i;for(r in n)if(n.hasOwnProperty(r)&&isNumber(r))if(u=parseInt(r),t=n[u],t.have=checkPermission(u),t.have)for(i in t.uIds)t.uIds.hasOwnProperty(i)&&$(`#${t.uIds[i]}`).removeClass("hidden");else for(i in t.uIds)t.uIds.hasOwnProperty(i)&&$(`#${t.uIds[i]}`).addClass("hidden");return n}function addCover(){$("body").append('<div id="body-cover"><div class="spinner"> <div class="spinner-container container1"><div class="circle1"><\/div><div class="circle2"><\/div> <div class="circle3"><\/div><div class="circle4"><\/div>  <\/div> <div class="spinner-container container2"><div class="circle1"><\/div> <div class="circle2"><\/div><div class="circle3"><\/div> <div class="circle4"><\/div> <\/div><div class="spinner-container container3"><div class="circle1"><\/div> <div class="circle2"><\/div>  <div class="circle3"><\/div> <div class="circle4"><\/div><\/div><\/div><\/div>')}function removeCover(){$("#body-cover").remove()}function reLogin(){console.log("err")}function ajaxPost(n,t,i,r){r!=0&&addCover();t==null&&(t={});var u=function(n){r!=0&&removeCover();i(n)};$.post(n,t,u).error(reLogin)}function ajaxGet(n,t,i){var r,u,f;t==null&&(t={});r="";for(u in t)r==""&&(r="?"),r!="?"&&(r=r+"&"),r=r+u+"="+t[u];f=function(n){removeCover();i(n)};n=n+r;$.get(n,f).error(reLogin)}function addToken(n){var t=GetCookie("token");return isStrEmptyOrUndefined(t)||(n.token=t),n}function getTokenTable(){var n=GetCookie("token");return isStrEmptyOrUndefined(n)?{}:{token:n}}function errorHandle(n){return n.errno==undefined||n.errno==null?!1:n.errno==0?!1:(layer.alert(n.errmsg),!0)}function SetCookie(n,t){var i=new Date;i.setTime(i.getTime()+31104e6);document.cookie=n+"="+escape(t)+";expires="+i.toGMTString()}function GetCookie(n){var t=document.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return t!=null?unescape(t[2]):null}function DelCookie(n){var t=new Date,i;t.setTime(t.getTime()-1);i=GetCookie(n);i!=null&&(document.cookie=n+"="+i+"; path=/;expires="+t.toGMTString())}function uploaderImg(n,t,i){function o(n){var t,i;for(t in uploader.fileList)for(i in uploader.fileList[t])if(uploader.fileList[t][i]===n)return t}function s(n){var t=o(File);for(var i in uploader.fileList[t])if(uploader.fileList[t][i]===n)return i}var r={},e,u,f;for(e in n)r[e]=n[e];$(document.body).append($('<input id="hidden-uploader-btn" type="file" style="display:none"  hidden/>'));for(e in n)(function(t){var i=$('<input type="file" accept="image/*" style="display:none"  hidden/>').change(function(){var r=$(n[t])[0],i=this.files[0];i&&(u=t,f=n[t],uploader.addFile(i))});$(document.body).append(i);$(n[t]).click(function(){i.click()})})(e);return uploader=new plupload.Uploader({browse_button:"hidden-uploader-btn",filters:{mime_types:[{title:"Image files",extensions:"jpeg,jpg,png"},],max_file_size:"10mb"},resize:{width:2500,quality:92,crop:!1,preserve_headers:!0},init:{PostInit:function(){},FilesAdded:function(n,t){var r=t[0],e;u&&f?(uploader.fileList[u]||(uploader.fileList[u]={}),uploader.fileList[u][f]&&uploader.removeFile(uploader.fileList[u][f]),uploader.fileList[u][f]=r,e=new FileReader,e.readAsDataURL(r.getNative()),e.onload=function(n){$(f).css("background-image","url("+n.target.result+")").addClass("bx-sz-img-loaded");i&&i.fileAdded&&i.fileAdded($(f)[0].id,r.getNative(),n.target.result)}):uploader.removeFile(r)},BeforeUpload:function(n,t){var f=o(t),r,i,u,e;if(f){if(r=uploader.fileAuths[f],r instanceof Array){for(u=0;u<r.length;u++)if(!r[u].used){i=r[u];uploader.fileAuths[f][u].used=!0;break}}else i=r;i?(e={key:i.objname,OSSAccessKeyId:i.accessid,policy:i.policy,signature:i.signature,callback:i.callback,success_action_status:"200"},n.setOption({url:i.host,multipart_params:e}),n._start()):n.removeFile(t)}else n.removeFile(t)},FileUploaded:function(n,r,u){var e,h,f;if(u.status===200){e=o(r);e;try{h=JSON.parse(u.response);t&&t(h)}catch(c){}}else i&&i.uploadedError?i.uploadedError(n,r,u):(f=s(r),f&&($(f).css("background-image","none"),$(f).removeClass("bx-sz-img-loaded"),layer.msg("上传失败,请重新上传",{icon:2})))},Error:function(n,t){if(t.file){var r=s(t.file);r&&($(r).css("background-image","none"),$(r).removeClass("bx-sz-img-loaded"));switch(t.code){case plupload.FILE_SIZE_ERROR:layer.msg("文件大小超出上传上限",{icon:2});break;case plupload.FILE_EXTENSION_ERROR:layer.msg("文件格式错误",{icon:2});break;case plupload.FILE_DUPLICATE_ERROR:layer.msg("不能上传同一张图片",{icon:2});break;case plupload.IMAGE_FORMAT_ERROR:layer.msg("图片格式出错",{icon:2});break;default:layer.msg("请重新上传",{icon:2})}}else layer.msg("上传失败,请重新上传..",{icon:2});i&&i.error&&i.error(n,t)}}}),uploader.fileList={},uploader.fileAuths={},uploader.init(),uploader._start=uploader.start,uploader.start=function(n){uploader.fileAuths=n;uploader._start()},uploader.addImg=function(n,t){var e,i;r[t]instanceof Array?r[t].push(n):(e=r[t],r[t]=[e,n]);i=$('<input type="file" accept="image/*" style="display:none" hidden/>').change(function(){var i=this.files[0];i&&(u=t,f=n,uploader.addFile(i))});$(document.body).append(i);$(n).click(function(){i.click()})},uploader.getPictures=function(){var e=[],n,t,f,i,u;for(n in r){if(t={UploadFileType:n,NewCount:0,ModifyList:[]},r[n]instanceof Array)for(f=0;f<r[n].length;f++)i=r[n][f],$(i).hasClass("bx-sz-img-loaded")&&uploader.fileList[n]&&uploader.fileList[n]&&uploader.fileList[n][i]&&(u=parseInt($(i).attr("data-modify-idx")),u===0||u?t.ModifyList.push(u):t.NewCount++);else i=r[n],$(i).hasClass("bx-sz-img-loaded")&&uploader.fileList[n]&&uploader.fileList[n][i]&&(u=parseInt($(i).attr("data-modify-idx")),u===0||u?t.ModifyList.push(u):t.NewCount=1);(t.NewCount>0||t.ModifyList.length>0)&&e.push(t)}return e},uploader.removeAllImgs=function(){r={};uploader.fileList={}},uploader}function CreateImgsByMultyUrl(n,t){var u,r,i,f;if($(n).html(""),t)for(u=t.split(","),r=0;r<u.length;r++)i=document.createElement("img"),i.setAttribute("src",u[r]),i.setAttribute("style","margin-top:5px"),f=new Viewer(i),$(n).append(i),$(n).append("<br />")}function CreateImgsByMultyUrlNew(n,t){var u,i,r;if($(n).html(""),t)for(u=t.split(","),i=0;i<u.length;i++)r=document.createElement("img"),r.setAttribute("src",u[i]),r.setAttribute("style","margin-top:5px"),$(n).append(r),$(n).append("<br />")}function CreateInvoiceImgs(n,t){var i,f,r,u,e;if($(n).html(""),t)for(i=0;i<t.OurInvoiceUrlList.length;i++)f=t.OurInvoiceUrlList[i].m_Item2.URL,r=document.createElement("imgDiv"),$(r).append('<h4 style="color:#45B4FF; margin-top:5px;">第'+t.OurInvoiceUrlList[i].m_Item1+"期<\/h4>"),$(r).append('<p style="margin-top:5px;"><b style="margin-right:10px;">发票号:<\/b>'+t.OurInvoiceUrlList[i].m_Item2.Id+"<\/p>"),$(r).append('<p style="margin-top:5px;"><b style="margin-right:10px;">开票时间:<\/b>'+t.OurInvoiceUrlList[i].m_Item2.Time+"<\/p>"),u=document.createElement("img"),u.setAttribute("src",f),e=new Viewer(u),$(r).append(u),$(n).append(r)}function CreateInvoiceImgsNew(n,t){var i,f,r,u;if($(n).html(""),t)for(i=0;i<t.OurInvoiceUrlList.length;i++)f=t.OurInvoiceUrlList[i].m_Item2.URL,r=document.createElement("imgDiv"),$(r).append('<h4 style="color:#45B4FF; margin-top:5px;">第'+t.OurInvoiceUrlList[i].m_Item1+"期<\/h4>"),$(r).append('<p style="margin-top:5px;"><b style="margin-right:10px;">发票号:<\/b>'+t.OurInvoiceUrlList[i].m_Item2.Id+"<\/p>"),$(r).append('<p style="margin-top:5px;"><b style="margin-right:10px;">开票时间:<\/b>'+t.OurInvoiceUrlList[i].m_Item2.Time+"<\/p>"),u=document.createElement("img"),u.setAttribute("src",f),$(r).append(u),$(n).append(r)}function ImgCreated(n){this.id=n.id;this.url=n.url;this.dataType();this.creat()}function dataType(){var n=Object.prototype.toString,t={isStr:function(t){return n.call(t)=="[object String]"},isObj:function(t){return n.call(t)=="[object Object]"},isArr:function(t){return n.call(t)=="[object Array]"},isNull:function(t){return n.call(t)=="[object Null]"}};if(!t.isArr(this.id))throw"ID  type must be an array";if(!t.isArr(this.url))throw"URL  type must be an array";if(this.id.length!==this.url.length)throw"The length of ID and URL must be the same";}function imgShowBig(n){var t=new Viewer(document.getElementById(n),{ready:function(){t.update()},show:function(){t.update()},shown:function(){t.update()},hide:function(){t.update()}})}function creat(){var n=this,t=[null,undefined,NaN];this.url.forEach(function(i,r){var u=document.getElementById(n.id[r]);if(u.innerHTML="",t.indexOf(i)>=0)return!1;i.split(",").forEach(function(n){var t=document.createElement("img");t.className="idePhoto";t.setAttribute("src",n);u.appendChild(t)})})}function showConfirm(n,t){layer.confirm("是否确定"+n,{btn:["确定","取消"],success:function(){this.enterEsc=function(n){return n.keyCode===13?($(".layui-layer-btn0").click(),!1):n.keyCode==27?($(".layui-layer-btn1").click(),!1):void 0};$(document).on("keydown",this.enterEsc)},end:function(){$(document).off("keydown",this.enterEsc)}},function(n){layer.close(n);t()},function(n){layer.close(n)})}function focusIn(n,t="label-danger"){var i=n.parent().find("."+t+":first");i.html();i.addClass("hidden")}function inputChange(n,t){var i=n.parents("."+t+":first").find(".label-danger");i.html();i.addClass("hidden")}function hideTip(n){typeof n=="string"?($("#"+n).addClass("hidden"),$("#"+n).html()):(n.addClass("hidden"),n.html())}function showTip(n,t){typeof n=="string"?($("#"+n).removeClass("hidden"),$("#"+n).html(t)):(n.removeClass("hidden"),n.html(t))}function hideClassTip(n){$("."+n).addClass("hidden");$("."+n).html()}function showClassTip(n,t){$("."+n).removeClass("hidden");$("."+n).html(t)}function getQueryString(n){var i=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(i);return t!=null?unescape(t[2]):null}function initFileInput(n,t){$("#"+n).attr("accept",fileAccept[t]);return $("#"+n).fileinput({language:"zh",uploadUrl:"/Upload/File",allowedFileExtensions:fileExt[t],showUpload:!1,showPreview:!0,showCaption:!0,minFileCount:1,maxFileCount:1,dropZoneEnabled:!1,browseClass:"btn btn-primary",uploadAsync:!0,autoReplace:!0,layoutTemplates:{actionDelete:"",actionUpload:"",actionZoom:""},uploadExtraData:function(){var n={};return n.type=t,n}}).on("filebatchselected",function(i,r){var u,f;r.length>1&&$("#"+n).fileinput("clear");switch(t){case fileEnum.FirmwareLibrary:case fileEnum.ApplicationLibrary:r.length!=undefined&&$("#"+n).fileinput("clear");u="";for(f in r)if(r.hasOwnProperty(f)){u=f;break}checkFileExt(u,fileExt[t])||$("#"+n).fileinput("clear")}}).on("filepreupload",function(n,t){var i=t.form,r=t.files,u=t.extra,f=t.response,e=t.reader;console.log("文件正在上传")}).on("fileerror",function(n,t,i){console.log("文件上传失败！"+i);$(this).fileinput("clear")}).on("fileuploaded",function(n,i){console.log("文件上传成功！");$(this).fileinput("clear");fileCallBack[t](i.response)})}function initFileInputMultiple(n,t){prepareUpload=[];$("#"+n).attr("multiple","");$("#"+n).attr("accept",fileAccept[t]);return $("#"+n).fileinput({language:"zh",uploadUrl:"/Upload/FileMultiple",allowedFileExtensions:fileExt[t],showUpload:!1,showPreview:!0,showCaption:!0,minFileCount:0,maxFileCount:0,dropZoneEnabled:!1,browseClass:"btn btn-primary",uploadAsync:!0,autoReplace:!1,layoutTemplates:{actionUpload:""},uploadExtraData:function(){var n={};return n.type=t,n}}).on("filebatchselected",function(i,r){var u="",e,f;for(e in r)if(r.hasOwnProperty(e)){if(u=e,!checkFileExt(u,fileExt[t])){$("#"+n).fileinput("clear");break}f=$("#"+$(this).attr("parent")).find('[data-fileid="{0}"]'.format(u)).filter(".file-preview-frame").first().attr("id");prepareUpload[f]||(prepareUpload[f]={pre:f,name:u,done:!1})}}).on("fileclear",function(){console.log("删除所有选择文件");prepareUpload=[]}).on("fileremoved",function(n,t){console.log("删除选择文件");prepareUpload=removeArrayObj(prepareUpload,t)}).on("filepreupload",function(n,t){console.log("文件正在上传");var i=t.form,r=t.files,u=t.extra,f=t.response,e=t.reader}).on("fileerror",function(n,i,r){console.log("文件上传失败！"+r);$(this).fileinput("clear");fileCallBack[t]({errno:1,errmsg:"失败"})}).on("fileuploaded",function(n,t,i){var r=t.response,u,f;if(r.errno==0)for(console.log("文件上传成功！"),u=0;u<r.data.length;u++)f=r.data[u],prepareUpload[i].done=!0,prepareUpload[i].newName=f.newName;else console.log("文件上传失败！"),layer.msg(r.errmsg)}).on("filebatchuploadcomplete",function(){var n,i;console.log("文件全部上传成功！");n=!0;for(i in prepareUpload)prepareUpload.hasOwnProperty(i)&&(prepareUpload[i].done||(n=!1));n?fileCallBack[t]({errno:0,errmsg:"成功",data:prepareUpload}):fileCallBack[t]({errno:1,errmsg:"失败"});prepareUpload=[]})}function hasPre(){var n=!1;for(var t in prepareUpload)prepareUpload.hasOwnProperty(t)&&(n=!0);return n}function checkFileExt(n,t){var r=n.toLowerCase().split("."),i;if(r.length>1)for(i=0;i<t.length;i++)if(r[r.length-1]==t[i])return!0;return!1}function onInput(n,t=5,i=4){n.value=input(n.value,t,i)}function input(n,t=5,i=4){n!=""&&n.substr(0,1)=="."&&(n="");n=n.replace(/^0*(0\.|[1-9])/,"$1");n=n.replace(/[^\d.]/g,"");n=n.replace(/\.{2,}/g,".");n=n.replace(".","$#$").replace(/\./g,"").replace("$#$",".");var r=eval("/^(\\-)*(\\d+)\\.(\\d{"+i+"}).*$/");if(n=n.replace(r,"$1$2.$3"),n.indexOf(".")<0&&n!="")while(n.substr(0,2)=="00")n=n.substr(1,n.length);return n!=""&&(n=n.split("."),n.length>0&&n[0].length>=t&&(n[0]=n[0].substr(0,t)),n.length>0&&n[1]&&n[1].length>=i&&(n[1]=n[1].substr(0,i)),n=i>0?n.join("."):n.join("")),n}function onInputEnd(n){n.value=inputEnd(n.value)}function inputEnd(n){if(n.indexOf(".")>-1&&n!=""){for(n=n.split("").reverse().join("");n.substr(0,1)=="0";)n=n.substr(1,n.length);while(n.substr(0,1)==".")n=n.substr(1,n.length);return n.split("").reverse().join("")}return n}function autoCal(n,t){var o,i,u,e,f,r;if(n.value!=""){for(o=0,n.value.indexOf("±")>-1?o=1:n.value.indexOf("+")>-1&&n.value.indexOf("/")>-1&&n.value.indexOf("-")>-1?o=3:(n.value.indexOf("～")>-1||n.value.indexOf("~")>-1||n.value.indexOf("-")>-1)&&(o=2),t=$("#"+t),i=[],u=n.value.replace(" ","").split(""),u.push(";"),e="",f=0;f<u.length;f++)o==3?isNumber(u[f])||u[f]=="."||u[f]=="-"?e+=u[f]:(isNumber(e)&&(i[i.length]=parseFloat(e)),e=""):isNumber(u[f])||u[f]=="."?e+=u[f]:(isNumber(e)&&(i[i.length]=parseFloat(e)),e="");switch(o){case 1:i.length>=1&&(r=i[0]);break;case 2:i.length==1?r=i[0]:i.length>=2&&(r=(i[0]+i[1])/2);break;case 3:i.length==1?r=i[0]:i.length>=3&&(r=i[0]+(i[1]+i[2])/2);break;default:r=i.length>=1?i[0]:0}r=r.toFixed(4);r=input(r.toString());r=inputEnd(r.toString());t.val(r)}}function pcAndroid(){return/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)?!0:!1}function objectSort(n,t){for(var i,f,e=n.length,u,r=0;r<e-1;r++){for(u=!0,i=0;i<e-1-r;i++)n[i][t]>n[i+1][t]&&(u=!1,f=n[i],n[i]=n[i+1],n[i+1]=f);if(u)break}}function distinct(n){for(var r=[],u={},f=n.length,i,t=0;t<f;t++)i=n[t],u[i]||(r.push(i),u[i]=1);return r}function removeArray(n,t,i=false){for(var r in n)if(r.hasOwnProperty(t)){n.splice(n.indexOf(r),i?n.length:1);break}return n}function removeArray(n,t,i,r=false){for(var u=n.length-1;u>=0;u--)if(n[u][t]==i){n.splice(n.indexOf(n[u]),r?n.length:1);break}return n}function removeArrayObj(n,t,i=false){var u=[];for(var r in n)r!=t&&(u[r]||i||(u[r]=n[r]));return u}function existArray(n,t){for(var i in n)if(n[i]==t)return!0;return!1}function existArrayObj(n,t,i){for(var r in n)if(n[r].hasOwnProperty(t)&&n[r][t]==i)return!0;return!1}function clone(n){var t,i,u,r;if(typeof n=="object")if(n===null)t=null;else if(n instanceof Array)for(t=[],i=0,u=n.length;i<u;i++)t.push(clone(n[i]));else{t={};for(r in n)t[r]=clone(n[r])}else t=n;return t}function showAllContent(n,t="备注",i=""){n=unescape(n);i==""&&(i="remarkModel");var u=`<div class="modal fade" id="${i}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
               <div class="modal-content">
                   <div class="modal-header">
                       <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                       <h4 class="modal-title">${t}</h4>
                   </div>
                   <div class="modal-body">
                       <div class="form-group">
                           <textarea class="form-control" disabled="disabled" id="usuallyFaultDetail" style="resize: vertical; height: 200px; overflow-y: scroll;">${n}</textarea>
                       </div>
                   </div>
                   <div class="modal-footer">
                       <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                   </div>
                </div>
           </div>
        </div>`,r=$(u);$(".content").append(r);r.modal("show");r.on("hidden.bs.modal",function(){r.remove()})}function showPrintModal(n){var c=`<div class="modal fade" id="${"_printModal"}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
               <div class="modal-content">
                   <div class="modal-header">
                       <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                       <h4 class="modal-title"></h4>
                   </div>
                   <div class="modal-body" style="position:relative">
                        <div class="qrcode-box" style="position:absolute;left:50%;transform:translateX(-50%);width:300px;height:300px">
                            <span></span>
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                        <video style="width: 100%;height:300px"></video>
                        <canvas class="hidden" width="300" height="300"></canvas>
                   </div>
                   <div class="modal-footer">
                       <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                   </div>
               </div>
           </div>
        </div>`,t=$(c),s,h;$(".content").append(t);var u,i,e=null,f=$("#_printModal video")[0],r=$("#_printModal canvas")[0],o=r.getContext("2d");t.on("hidden.bs.modal",function(){u&&u.stop();i&&clearInterval(i);n(e);t.remove()});$(document).on("visibilitychange",function(){var n=this.visibilityState;n=="hidden"&&t.modal("hide")});s=(n,t,i)=>{navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(n).then(t).catch(i):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(n).then(t).catch(i):navigator.mozGetUserMedia?navigator.mozGetUserMedia(n).then(t).catch(i):navigator.getUserMedia&&navigator.getUserMedia(n).then(t).catch(i)};h=()=>{o.drawImage(f,0,0,300,300),qrcode.decode(r.toDataURL("image/png")),qrcode.callback=n=>{n!="error decoding QR Code"&&(/,/.test(n)?(e=n,clearInterval(i),o.clearRect(0,0,r.width,r.height),t.modal("hide")):alert(n))}};navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia?s({video:{width:500,height:500,facingMode:{exact:"environment"}}},n=>{t.modal("show"),f.srcObject=n,f.play(),u=n.getTracks()[0],i=setInterval(h,500)},()=>{t.modal("hide"),layer.msg("访问用户媒体设备失败")}):(t.modal("hide"),layer.msg("不支持访问用户媒体"))}function getObjectURL(n){var t=null;return window.createObjectURL!=undefined?t=window.createObjectURL(n):window.URL!=undefined?t=window.URL.createObjectURL(n):window.webkitURL!=undefined&&(t=window.webkitURL.createObjectURL(n)),t}function printImgUp(n,t){qrcode.decode(getObjectURL(t.files[0]));qrcode.callback=function(t){t!="error decoding QR Code"?/,/.test(t)?n(t):(layer.msg("请上传集中控制相关的二维码图片"),n(null)):(layer.msg("识别失败"),n(null))}}function showBigImg(n){var u=`<div id="outerDiv" style="position:fixed;top:0;left:0;background:rgba(0,0,0,0.7);z-index:10000;width:100%;height:100%;">
            <div id="innerDiv" style="position:absolute;">
                <img id="bigImg" style="border:5px solid #fff;" src="" />
            </div>
        </div>`,t=$(u);$(".content").append(t);var i="#outerDiv",f="#innerDiv",r="#bigImg";$(r).attr("src",n);$("<img/>").attr("src",n).load(function(){var u=$(window).width(),h=$(window).height(),o=this.width,s=this.height,n,e,t=.8,c,l;s>h*t?(e=h*t,n=e/s*o,n>u*t&&(n=u*t)):o>u*t?(n=u*t,e=n/o*s):(n=o,e=s);$(r).css("width",n);c=(u-n)/2;l=(h-e)/2;$(f).css({top:l,left:c});$(i).fadeIn("fast")});$(i).click(function(){$(this).fadeOut("fast");t.remove()})}function printCode(n,t,i){var r=navigator.userAgent.toLowerCase(),u,f;if(r.indexOf("trident")>-1){alert("请使用google或者360浏览器打印");return}if(r.indexOf("msie")>-1){u=simpleAlert({content:"请使用Google或者360浏览器打印",buttons:{"确定":function(){u.close()}}});alert("请使用google或者360浏览器打印");return}isStrEmptyOrUndefined(i)||(document.getElementById(i).style.display="none");f=document.getElementById(n).innerHTML;document.getElementById(t).contentDocument.body.innerHTML=f;window.frames[t].print();isStrEmptyOrUndefined(i)||(document.getElementById(i).style.display="block")}function comTimeDay(n,t){return exceedTime(n)?(layer.msg("开始时间不能大于当前时间"),!0):compareDate(n,t)?(layer.msg("开始时间不能大于结束时间"),!0):!1}var isCover=!1,prepareUpload;String.prototype.format=function(n){var i=this,r,t,u;if(arguments.length>0)if(arguments.length==1&&typeof n=="object")for(r in n)n[r]!=undefined&&(u=new RegExp("({"+r+"})","g"),i=i.replace(u,n[r]));else for(t=0;t<arguments.length;t++)arguments[t]!=undefined&&(u=new RegExp("({)"+t+"(})","g"),i=i.replace(u,arguments[t]));return i};String.format=function(){var t,n,i;if(arguments.length==0)return null;for(t=arguments[0],n=1;n<arguments.length;n++)i=new RegExp("\\{"+(n-1)+"\\}","gm"),t=t.replace(i,arguments[n]);return t};ImgCreated.prototype.dataType=dataType;ImgCreated.prototype.creat=creat;prepareUpload=[];