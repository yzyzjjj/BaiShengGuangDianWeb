/**
* @license Input Mask plugin for jquery
* http://github.com/RobinHerbots/jquery.inputmask
* Copyright (c) 2010 - 2014 Robin Herbots
* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
* Version: 0.0.0
*/
(function(n){if(n.fn.inputmask===undefined){function u(n){var t=document.createElement("input"),n="on"+n,i=n in t;return i||(t.setAttribute(n,"return;"),i=typeof t[n]=="function"),t=null,i}function i(t,r,u){var f=u.aliases[t];return f?(f.alias&&i(f.alias,undefined,u),n.extend(!0,u,f),n.extend(!0,u,r),!0):!1}function r(t){function f(i){var o,e,s;t.numericInput&&(i=i.split("").reverse().join(""));var r=!1,h=0,u=t.greedy,f=t.repeat;for(f=="*"&&(u=!1),i.length==1&&u==!1&&f!=0&&(t.placeholder=""),o=n.map(i.split(""),function(n){var i=[],f,u;if(n==t.escapeChar)r=!0;else if(n!=t.optionalmarker.start&&n!=t.optionalmarker.end||r){if(f=t.definitions[n],f&&!r)for(u=0;u<f.cardinality;u++)i.push(t.placeholder.charAt((h+u)%t.placeholder.length));else i.push(n),r=!1;return h+=i.length,i}}),e=o.slice(),s=1;s<f&&u;s++)e=e.concat(o.slice());return{mask:e,repeat:f,greedy:u}}function e(i){t.numericInput&&(i=i.split("").reverse().join(""));var r=!1,f=!1,u=!1;return n.map(i.split(""),function(n){var o=[],i,s,c,e;if(n==t.escapeChar)f=!0;else if(n!=t.optionalmarker.start||f){if(n!=t.optionalmarker.end||f){if(i=t.definitions[n],i&&!f){for(s=i.prevalidator,c=s?s.length:0,e=1;e<i.cardinality;e++){var l=c>=e?s[e-1]:[],h=l.validator,a=l.cardinality;o.push({fn:h?typeof h=="string"?new RegExp(h):new function(){this.test=h}:new RegExp("."),cardinality:a?a:1,optionality:r,newBlockMarker:r==!0?u:!1,offset:0,casing:i.casing,def:i.definitionSymbol||n});r==!0&&(u=!1)}o.push({fn:i.validator?typeof i.validator=="string"?new RegExp(i.validator):new function(){this.test=i.validator}:new RegExp("."),cardinality:i.cardinality,optionality:r,newBlockMarker:u,offset:0,casing:i.casing,def:i.definitionSymbol||n})}else o.push({fn:null,cardinality:0,optionality:r,newBlockMarker:u,offset:0,casing:null,def:n}),f=!1;return u=!1,o}r=!1;u=!0}else r=!0,u=!0})}function s(n){return t.optionalmarker.start+n+t.optionalmarker.end}function h(n){for(var f,r=0,e=0,u=n.length,i=0;i<u;i++)if(n.charAt(i)==t.optionalmarker.start&&r++,n.charAt(i)==t.optionalmarker.end&&e++,r>0&&r==e)break;return f=[n.substring(0,i)],i<u&&f.push(n.substring(i+1,u)),f}function o(n){for(var u,r=n.length,i=0;i<r;i++)if(n.charAt(i)==t.optionalmarker.start)break;return u=[n.substring(0,i)],i<r&&u.push(n.substring(i+1,r)),u}function r(t,c,l){var y=h(c),a,v,p=o(y[0]);p.length>1?(a=t+p[0]+s(p[1])+(y.length>1?y[1]:""),n.inArray(a,i)==-1&&a!=""&&(i.push(a),v=f(a),u.push({mask:a,_buffer:v.mask,buffer:v.mask.slice(),tests:e(a),lastValidPosition:-1,greedy:v.greedy,repeat:v.repeat,metadata:l})),a=t+p[0]+(y.length>1?y[1]:""),n.inArray(a,i)==-1&&a!=""&&(i.push(a),v=f(a),u.push({mask:a,_buffer:v.mask,buffer:v.mask.slice(),tests:e(a),lastValidPosition:-1,greedy:v.greedy,repeat:v.repeat,metadata:l})),o(p[1]).length>1&&r(t+p[0],p[1]+y[1],l),y.length>1&&o(y[1]).length>1&&(r(t+p[0]+s(p[1]),y[1],l),r(t+p[0],y[1],l))):(a=t+y,n.inArray(a,i)==-1&&a!=""&&(i.push(a),v=f(a),u.push({mask:a,_buffer:v.mask,buffer:v.mask.slice(),tests:e(a),lastValidPosition:-1,greedy:v.greedy,repeat:v.repeat,metadata:l})))}var u=[],i=[];return n.isFunction(t.mask)&&(t.mask=t.mask.call(this,t)),n.isArray(t.mask)?n.each(t.mask,function(n,t){t.mask!=undefined?r("",t.mask.toString(),t):r("",t.toString())}):r("",t.mask.toString()),t.greedy?u:u.sort(function(n,t){return n.mask.length-t.mask.length})}var e=navigator.userAgent.match(new RegExp("msie 10","i"))!==null,o=navigator.userAgent.match(new RegExp("iphone","i"))!==null,s=navigator.userAgent.match(new RegExp("android.*safari.*","i"))!==null,f=navigator.userAgent.match(new RegExp("android.*chrome.*","i"))!==null,h=u("paste")?"paste":u("input")?"input":"propertychange";function t(t,i,r,u){function c(){return t[i]}function rt(){return c().tests}function v(){return c()._buffer}function l(){return c().buffer}function ht(u,f,e){function s(n,t,i,u){for(var f=tt(n),h=i?1:0,e="",s=t.buffer,o=t.tests[f].cardinality;o>h;o--)e+=nt(s,f-(o-1));return i&&(e+=i),t.tests[f].fn!=null?t.tests[f].fn.test(e,s,n,u,r):i==nt(t._buffer,n,!0)||i==r.skipOptionalPartCharacter?{refresh:!0,c:nt(t._buffer,n,!0),pos:n}:!1}function it(i,r){var l=!1,e,o,c;return n.each(r,function(t,r){return l=n.inArray(r.activeMasksetIndex,i)==-1&&r.result!==!1,l?!1:void 0}),l?r=n.map(r,function(r){if(n.inArray(r.activeMasksetIndex,i)==-1)return r;t[r.activeMasksetIndex].lastValidPosition=h}):(e=-1,o=-1,n.each(r,function(t,r){n.inArray(r.activeMasksetIndex,i)!=-1&&r.result!==!1&(e==-1||e>r.result.pos)&&(e=r.result.pos,o=r.activeMasksetIndex)}),r=n.map(r,function(r){if(n.inArray(r.activeMasksetIndex,i)!=-1){if(r.result.pos==e)return r;if(r.result!==!1){for(var h=u;h<e;h++)if(c=s(h,t[r.activeMasksetIndex],t[o].buffer[h],!0),c===!1){t[r.activeMasksetIndex].lastValidPosition=e-1;break}else g(t[r.activeMasksetIndex].buffer,h,t[o].buffer[h],!0),t[r.activeMasksetIndex].lastValidPosition=h;return c=s(e,t[r.activeMasksetIndex],f,!0),c!==!1&&(g(t[r.activeMasksetIndex].buffer,e,f,!0),t[r.activeMasksetIndex].lastValidPosition=e),r}}})),r}var o;if(e=e===!0,e)return o=s(u,c(),f,e),o===!0&&(o={pos:u}),o;var a=[],o=!1,v=i,w=l().slice(),h=c().lastValidPosition,rt=d(u),b=[];return n.each(t,function(n,t){var r,it,tt,d,ut,rt,nt;if(typeof t=="object"){if(i=n,r=u,it=c().lastValidPosition,it==h){if(r-h>1)for(d=it==-1?0:it;d<r;d++)if(tt=s(d,c(),w[d],!0),tt===!1)break;else g(l(),d,w[d],!0),tt===!0&&(tt={pos:d}),nt=tt.pos||d,c().lastValidPosition<nt&&(c().lastValidPosition=nt);if(!k(r)&&!s(r,c(),f,e)){for(ut=p(r)-r,rt=0;rt<ut;rt++)if(s(++r,c(),f,e)!==!1)break;b.push(i)}}(c().lastValidPosition>=h||i==v)&&r>=0&&r<y()&&(o=s(r,c(),f,e),o!==!1&&(o===!0&&(o={pos:r}),nt=o.pos||r,c().lastValidPosition<nt&&(c().lastValidPosition=nt)),a.push({activeMasksetIndex:n,result:o}))}}),i=v,it(b,a)}function dt(){var u=i,r={activeMasksetIndex:0,lastValidPosition:-1,next:-1};n.each(t,function(n,t){typeof t=="object"&&(i=n,c().lastValidPosition>r.lastValidPosition?(r.activeMasksetIndex=n,r.lastValidPosition=c().lastValidPosition,r.next=p(c().lastValidPosition)):c().lastValidPosition==r.lastValidPosition&&(r.next==-1||r.next>p(c().lastValidPosition))&&(r.activeMasksetIndex=n,r.lastValidPosition=c().lastValidPosition,r.next=p(c().lastValidPosition)))});i=r.lastValidPosition!=-1&&t[u].lastValidPosition==r.lastValidPosition?u:r.activeMasksetIndex;u!=i&&(vt(l(),p(r.lastValidPosition),y()),c().writeOutBuffer=!0);a.data("_inputmask").activeMasksetIndex=i}function k(n){var i=tt(n),t=rt()[i];return t!=undefined?t.fn:!1}function tt(n){return n%rt().length}function y(){return r.getMaskLength(v(),c().greedy,c().repeat,l(),r)}function p(n){var i=y(),t;if(n>=i)return i;for(t=n;++t<i&&!k(t););return t}function d(n){var t=n;if(t<=0)return 0;while(--t>0&&!k(t));return t}function g(n,t,i,r){r&&(t=gt(n,t));var f=rt()[tt(t)],u=i;if(u!=undefined&&f!=undefined)switch(f.casing){case"upper":u=i.toUpperCase();break;case"lower":u=i.toLowerCase()}n[t]=u}function nt(n,t,i){return i&&(t=gt(n,t)),n[t]}function gt(n,t){for(var i;n[t]==undefined&&n.length<y();)for(i=0;v()[i]!==undefined;)n.push(v()[i++]);return t}function it(n,t,i){n._valueSet(t.join(""));i!=undefined&&w(n,i)}function vt(n,t,i,r){for(var u=t,f=y();u<i&&u<f;u++)r===!0?k(u)||g(n,u,""):g(n,u,nt(v().slice(),u,!0))}function lt(n,t){var i=tt(t);g(n,t,nt(v(),i))}function et(n){return r.placeholder.charAt(n%r.placeholder.length)}function ot(r,u,f,e,o){var s=e!=undefined?e.slice():yt(r._valueGet()).split(""),h;n.each(t,function(n,t){typeof t=="object"&&(t.buffer=t._buffer.slice(),t.lastValidPosition=-1,t.p=-1)});f!==!0&&(i=0);u&&r._valueSet("");h=y();n.each(s,function(t,i){if(o===!0){var e=c().p,s=e==-1?e:d(e),h=s==-1?t:p(s);n.inArray(i,v().slice(s+1,h))==-1&&wt.call(r,undefined,!0,i.charCodeAt(0),u,f,t)}else wt.call(r,undefined,!0,i.charCodeAt(0),u,f,t)});f===!0&&c().p!=-1&&(c().lastValidPosition=d(c().p))}function fi(t){return n.inputmask.escapeRegex.call(this,t)}function yt(n){return n.replace(new RegExp("("+fi(v().join(""))+")*$"),"")}function pt(n){for(var u,r=l(),i=r.slice(),t=i.length-1;t>=0;t--)if(u=tt(t),rt()[u].optionality)if(k(t)&&ht(t,r[t],!0))break;else i.pop();else break;it(n,i)}function ei(t,i){if(rt()&&(i===!0||!t.hasClass("hasDatepicker"))){var u=n.map(l(),function(n,t){return k(t)&&ht(t,n,!0)?n:null}),f=(b?u.reverse():u).join("");return r.onUnMask!=undefined?r.onUnMask.call(this,l().join(""),f):f}return t[0]._valueGet()}function ft(n){if(b&&typeof n=="number"&&(!r.greedy||r.placeholder!="")){var t=l().length;n=t-n}return n}function w(t,i,u){var f=t.jquery&&t.length>0?t[0]:t,e;if(typeof i=="number"){if(i=ft(i),u=ft(u),!n(t).is(":visible"))return;u=typeof u=="number"?u:i;f.scrollLeft=f.scrollWidth;r.insertMode==!1&&i==u&&u++;f.setSelectionRange?(f.selectionStart=i,f.selectionEnd=s?i:u):f.createTextRange&&(e=f.createTextRange(),e.collapse(!0),e.moveEnd("character",u),e.moveStart("character",i),e.select())}else return n(t).is(":visible")?(f.setSelectionRange?(i=f.selectionStart,u=f.selectionEnd):document.selection&&document.selection.createRange&&(e=document.selection.createRange(),i=0-e.duplicate().moveStart("character",-1e5),u=i+e.text.length),i=ft(i),u=ft(u),{begin:i,end:u}):{begin:0,end:0}}function ct(u){if(r.repeat=="*")return undefined;var f=!1,e=0,o=i;return n.each(t,function(n,t){var o,s,r,h,c;if(typeof t=="object"){if(i=n,o=d(y()),t.lastValidPosition>=e&&t.lastValidPosition==o){for(s=!0,r=0;r<=o;r++)if(h=k(r),c=tt(r),h&&(u[r]==undefined||u[r]==et(r))||!h&&u[r]!=v()[c]){s=!1;break}if(f=f||s,f)return!1}e=t.lastValidPosition}}),i=o,f}function oi(n,t){return b?n-t>1||n-t==1&&r.insertMode:t-n>1||t-n==1&&r.insertMode}function si(t){var i=n._data(t).events;n.each(i,function(t,i){n.each(i,function(n,t){if(t.namespace=="inputmask"&&t.type!="setvalue"){var i=t.handler;t.handler=function(n){if(this.readOnly||this.disabled)n.preventDefault;else return i.apply(this,arguments)}}})})}function hi(t){var u,i,r;Object.getOwnPropertyDescriptor&&(u=Object.getOwnPropertyDescriptor(t,"value"));u&&u.get?t._valueGet||(i=u.get,r=u.set,t._valueGet=function(){return b?i.call(this).split("").reverse().join(""):i.call(this)},t._valueSet=function(n){r.call(this,b?n.split("").reverse().join(""):n)},Object.defineProperty(t,"value",{get:function(){var r=n(this),t=n(this).data("_inputmask"),u=t.masksets,f=t.activeMasksetIndex;return t&&t.opts.autoUnmask?r.inputmask("unmaskedvalue"):i.call(this)!=u[f]._buffer.join("")?i.call(this):""},set:function(t){r.call(this,t);n(this).triggerHandler("setvalue.inputmask")}})):document.__lookupGetter__&&t.__lookupGetter__("value")?t._valueGet||(i=t.__lookupGetter__("value"),r=t.__lookupSetter__("value"),t._valueGet=function(){return b?i.call(this).split("").reverse().join(""):i.call(this)},t._valueSet=function(n){r.call(this,b?n.split("").reverse().join(""):n)},t.__defineGetter__("value",function(){var r=n(this),t=n(this).data("_inputmask"),u=t.masksets,f=t.activeMasksetIndex;return t&&t.opts.autoUnmask?r.inputmask("unmaskedvalue"):i.call(this)!=u[f]._buffer.join("")?i.call(this):""}),t.__defineSetter__("value",function(t){r.call(this,t);n(this).triggerHandler("setvalue.inputmask")})):(t._valueGet||(t._valueGet=function(){return b?this.value.split("").reverse().join(""):this.value},t._valueSet=function(n){this.value=b?n.split("").reverse().join(""):n}),(n.valHooks.text==undefined||n.valHooks.text.inputmaskpatch!=!0)&&(i=n.valHooks.text&&n.valHooks.text.get?n.valHooks.text.get:function(n){return n.value},r=n.valHooks.text&&n.valHooks.text.set?n.valHooks.text.set:function(n,t){return n.value=t,n},jQuery.extend(n.valHooks,{text:{get:function(t){var r=n(t);if(r.data("_inputmask")){if(r.data("_inputmask").opts.autoUnmask)return r.inputmask("unmaskedvalue");var u=i(t),f=r.data("_inputmask"),e=f.masksets,o=f.activeMasksetIndex;return u!=e[o]._buffer.join("")?u:""}return i(t)},set:function(t,i){var u=n(t),f=r(t,i);return u.data("_inputmask")&&u.triggerHandler("setvalue.inputmask"),f},inputmaskpatch:!0}})))}function ni(n,t,i,r){var f=l(),e,o,s,u,h;if(r!==!1)while(!k(n)&&n-1>=0)n--;for(u=n;u<t&&u<y();u++)if(k(u)){if(lt(f,u),e=p(u),o=nt(f,e),o!=et(e))if(e<y()&&ht(u,o,!0)!==!1&&rt()[tt(u)].def==rt()[tt(e)].def)g(f,u,o,!0);else if(k(u))break}else lt(f,u);if(i!=undefined&&g(f,d(t),i),c().greedy==!1){for(s=yt(f.join("")).split(""),f.length=s.length,u=0,h=f.length;u<h;u++)f[u]=s[u];f.length==0&&(c().buffer=v().slice())}return n}function ti(n,t,i){var r=l(),f,e,s,o,u,h;if(nt(r,n,!0)!=et(n))for(u=d(t);u>n&&u>=0;u--)k(u)?(f=d(u),e=nt(r,f),e!=et(f)&&ht(f,e,!0)!==!1&&rt()[tt(u)].def==rt()[tt(f)].def&&(g(r,u,e,!0),lt(r,f))):lt(r,u);if(i!=undefined&&nt(r,n)==et(n)&&g(r,n,i),s=r.length,c().greedy==!1){for(o=yt(r.join("")).split(""),r.length=o.length,u=0,h=r.length;u<h;u++)r[u]=o[u];r.length==0&&(c().buffer=v().slice())}return t-(s-r.length)}function ii(n,i,u){var v,f,e,h,a,o,s;if(r.numericInput||b){switch(i){case r.keyCode.BACKSPACE:i=r.keyCode.DELETE;break;case r.keyCode.DELETE:i=r.keyCode.BACKSPACE}b&&(v=u.end,u.end=u.begin,u.begin=v)}if(f=!0,u.begin==u.end?(e=i==r.keyCode.BACKSPACE?u.begin-1:u.begin,r.isNumeric&&r.radixPoint!=""&&l()[e]==r.radixPoint&&(u.begin=l().length-1==e?u.begin:i==r.keyCode.BACKSPACE?e:p(e),u.end=u.begin),f=!1,i==r.keyCode.BACKSPACE?u.begin--:i==r.keyCode.DELETE&&u.end++):u.end-u.begin!=1||r.insertMode||(f=!1,i==r.keyCode.BACKSPACE&&u.begin--),vt(l(),u.begin,u.end),h=y(),r.greedy==!1)ni(u.begin,h,undefined,!b&&i==r.keyCode.BACKSPACE&&!f);else{for(a=u.begin,o=u.begin;o<u.end;o++)(k(o)||!f)&&(a=ni(u.begin,h,undefined,!b&&i==r.keyCode.BACKSPACE&&!f));f||(u.begin=a)}s=p(-1);vt(l(),u.begin,u.end,!0);ot(n,!1,t[1]==undefined||s>=u.end,l());c().lastValidPosition<s?(c().lastValidPosition=-1,c().p=s):c().p=u.begin}function ri(t){var s;at=!1;var u=this,e=n(u),i=t.keyCode,f=w(u);i==r.keyCode.BACKSPACE||i==r.keyCode.DELETE||o&&i==127||t.ctrlKey&&i==88?(t.preventDefault(),i==88&&(ut=l().join("")),ii(u,i,f),dt(),it(u,l(),c().p),u._valueGet()==v().join("")&&e.trigger("cleared"),r.showTooltip&&e.prop("title",c().mask)):i==r.keyCode.END||i==r.keyCode.PAGE_DOWN?setTimeout(function(){var n=p(c().lastValidPosition);r.insertMode||n!=y()||t.shiftKey||n--;w(u,t.shiftKey?f.begin:n,n)},0):(i!=r.keyCode.HOME||t.shiftKey)&&i!=r.keyCode.PAGE_UP?i==r.keyCode.ESCAPE||i==90&&t.ctrlKey?(ot(u,!0,!1,ut.split("")),e.click()):i!=r.keyCode.INSERT||t.shiftKey||t.ctrlKey?r.insertMode!=!1||t.shiftKey||(i==r.keyCode.RIGHT?setTimeout(function(){var n=w(u);w(u,n.begin)},0):i==r.keyCode.LEFT&&setTimeout(function(){var n=w(u);w(u,n.begin-1)},0)):(r.insertMode=!r.insertMode,w(u,!r.insertMode&&f.begin==y()?f.begin-1:f.begin)):w(u,0,t.shiftKey?f.begin:0);s=w(u);r.onKeyDown.call(this,t,l(),r)===!0&&w(u,s.begin,s.end);kt=n.inArray(i,r.ignorables)!=-1}function wt(u,f,e,o,s,h){var tt,ft,e,a,rt,ot,k,lt,ut,v,b,wt,yt,bt;if(e==undefined&&at)return!1;if(at=!0,tt=this,ft=n(tt),u=u||window.event,e=f?e:u.which||u.charCode||u.keyCode,f===!0||u.ctrlKey&&u.altKey||!(u.ctrlKey||u.metaKey||kt)){if(e){f!==!0&&e==46&&u.shiftKey==!1&&r.radixPoint==","&&(e=44);k=String.fromCharCode(e);f?(lt=s?h:c().lastValidPosition+1,a={begin:lt,end:lt}):a=w(tt);var pt=oi(a.begin,a.end),vt=i;pt&&(i=vt,n.each(t,function(n,t){typeof t=="object"&&(i=n,c().undoBuffer=l().join(""))}),ii(tt,r.keyCode.DELETE,a),r.insertMode||n.each(t,function(n,t){typeof t=="object"&&(i=n,ti(a.begin,y()),c().lastValidPosition=p(c().lastValidPosition))}),i=vt);ut=l().join("").indexOf(r.radixPoint);r.isNumeric&&f!==!0&&ut!=-1&&(r.greedy&&a.begin<=ut?(a.begin=d(a.begin),a.end=a.begin):k==r.radixPoint&&(a.begin=ut,a.end=a.begin));v=a.begin;rt=ht(v,k,s);s===!0&&(rt=[{activeMasksetIndex:i,result:rt}]);b=-1;n.each(rt,function(n,t){var u,o,h,f,tt,a,e,w;if(i=t.activeMasksetIndex,c().writeOutBuffer=!0,u=t.result,u!==!1){if(o=!1,h=l(),u!==!0&&(o=u.refresh,v=u.pos!=undefined?u.pos:v,k=u.c!=undefined?u.c:k),o!==!0){if(r.insertMode==!0){for(f=y(),tt=h.slice();nt(tt,f,!0)!=et(f)&&f>=v;)f=f==0?-1:d(f);f>=v?(ti(v,y(),k),a=c().lastValidPosition,e=p(a),e!=y()&&a>=v&&nt(l(),e,!0)!=et(e)&&(c().lastValidPosition=e)):c().writeOutBuffer=!1}else g(h,v,k,!0);(b==-1||b>p(v))&&(b=p(v))}else s||(w=v<y()?v+1:v,(b==-1||b>w)&&(b=w));b>c().p&&(c().p=b)}});s!==!0&&(i=vt,dt());o!==!1&&(n.each(rt,function(n,t){if(t.activeMasksetIndex==i)return ot=t,!1}),ot!=undefined&&(wt=this,setTimeout(function(){r.onKeyValidation.call(wt,ot.result,r)},0),c().writeOutBuffer&&ot.result!==!1?(yt=l(),bt=f?undefined:r.numericInput?v>ut?d(b):k==r.radixPoint?b-1:d(b-1):b,it(tt,yt,bt),f!==!0&&setTimeout(function(){ct(yt)===!0&&ft.trigger("complete");st=!0;ft.trigger("input")},0)):pt&&(c().buffer=c().undoBuffer.split(""))));r.showTooltip&&ft.prop("title",c().mask);u&&(u.preventDefault?u.preventDefault():u.returnValue=!1)}}else return!0}function ci(t){var e=n(this),i=this,o=t.keyCode,u=l();f&&o==r.keyCode.BACKSPACE&&bt==i._valueGet()&&ri.call(this,t);r.onKeyUp.call(this,t,u,r);o==r.keyCode.TAB&&r.showMaskOnFocus&&(e.hasClass("focus.inputmask")&&i._valueGet().length==0?(u=v().slice(),it(i,u),w(i,0),ut=l().join("")):(it(i,u),u.join("")==v().join("")&&n.inArray(r.radixPoint,u)!=-1?(w(i,ft(0)),e.click()):w(i,ft(0),ft(y()))))}function ui(){if(st===!0)return st=!1,!0;var t=this,i=n(t);bt=l().join("");ot(t,!1,!1);it(t,l());ct(l())===!0&&i.trigger("complete");i.click()}function li(u){var o,s,d;if(a=n(u),a.is(":input")){a.data("_inputmask",{masksets:t,activeMasksetIndex:i,opts:r,isRTL:!1});r.showTooltip&&a.prop("title",c().mask);c().greedy=c().greedy?c().greedy:c().repeat==0;a.attr("maxLength")!=null&&(o=a.prop("maxLength"),o>-1&&n.each(t,function(n,t){typeof t=="object"&&t.repeat=="*"&&(t.repeat=o)}),y()>=o&&o>-1&&(o<v().length&&(v().length=o),c().greedy==!1&&(c().repeat=Math.round(o/v().length)),a.prop("maxLength",y()*2)));hi(u);r.numericInput&&(r.isNumeric=r.numericInput);(u.dir=="rtl"||r.numericInput&&r.rightAlignNumerics||r.isNumeric&&r.rightAlignNumerics)&&a.css("text-align","right");(u.dir=="rtl"||r.numericInput)&&(u.dir="ltr",a.removeAttr("dir"),s=a.data("_inputmask"),s.isRTL=!0,a.data("_inputmask",s),b=!0);a.unbind(".inputmask");a.removeClass("focus.inputmask");a.closest("form").bind("submit",function(){ut!=l().join("")&&a.change()}).bind("reset",function(){setTimeout(function(){a.trigger("setvalue")},0)});a.bind("mouseenter.inputmask",function(){var i=n(this),t=this;!i.hasClass("focus.inputmask")&&r.showMaskOnHover&&t._valueGet()!=l().join("")&&it(t,l())}).bind("blur.inputmask",function(){var f=n(this),u=this,o=u._valueGet(),e=l();f.removeClass("focus.inputmask");ut!=l().join("")&&f.change();r.clearMaskOnLostFocus&&o!=""&&(o==v().join("")?u._valueSet(""):pt(u));ct(e)===!1&&(f.trigger("incomplete"),r.clearIncomplete&&(n.each(t,function(n,t){typeof t=="object"&&(t.buffer=t._buffer.slice(),t.lastValidPosition=-1)}),i=0,r.clearMaskOnLostFocus?u._valueSet(""):(e=v().slice(),it(u,e))))}).bind("focus.inputmask",function(){var i=n(this),t=this,u=t._valueGet();r.showMaskOnFocus&&!i.hasClass("focus.inputmask")&&(!r.showMaskOnHover||r.showMaskOnHover&&u=="")&&t._valueGet()!=l().join("")&&it(t,l(),p(c().lastValidPosition));i.addClass("focus.inputmask");ut=l().join("")}).bind("mouseleave.inputmask",function(){var i=n(this),t=this;r.clearMaskOnLostFocus&&(i.hasClass("focus.inputmask")||t._valueGet()==i.attr("placeholder")||(t._valueGet()==v().join("")||t._valueGet()==""?t._valueSet(""):pt(t)))}).bind("click.inputmask",function(){var t=this;setTimeout(function(){var u=w(t),f=l(),i,e,o;u.begin==u.end&&(i=b?ft(u.begin):u.begin,e=c().lastValidPosition,o=r.isNumeric?r.skipRadixDance===!1&&r.radixPoint!=""&&n.inArray(r.radixPoint,f)!=-1?r.numericInput?p(n.inArray(r.radixPoint,f)):n.inArray(r.radixPoint,f):p(e):p(e),i<o?k(i)?w(t,i):w(t,p(i)):w(t,o))},0)}).bind("dblclick.inputmask",function(){var n=this;setTimeout(function(){w(n,0,p(c().lastValidPosition))},0)}).bind(h+".inputmask dragdrop.inputmask drop.inputmask",function(t){if(st===!0)return st=!1,!0;var i=this,u=n(i);if(t.type=="propertychange"&&i._valueGet().length<=y())return!0;setTimeout(function(){var n=r.onBeforePaste!=undefined?r.onBeforePaste.call(this,i._valueGet()):i._valueGet();ot(i,!0,!1,n.split(""),!0);ct(l())===!0&&u.trigger("complete");u.click()},0)}).bind("setvalue.inputmask",function(){var n=this;ot(n,!0);ut=l().join("");n._valueGet()==v().join("")&&n._valueSet("")}).bind("complete.inputmask",r.oncomplete).bind("incomplete.inputmask",r.onincomplete).bind("cleared.inputmask",r.oncleared).bind("keyup.inputmask",ci);f?a.bind("input.inputmask",ui):a.bind("keydown.inputmask",ri).bind("keypress.inputmask",wt);e&&a.bind("input.inputmask",ui);ot(u,!0,!1);ut=l().join("");try{d=document.activeElement}catch(g){}d===u?(a.addClass("focus.inputmask"),w(u,p(c().lastValidPosition))):r.clearMaskOnLostFocus?l().join("")==v().join("")?u._valueSet(""):pt(u):it(u,l());si(u)}}var b=!1,ut=l().join(""),a,bt,at=!1,st=!1,kt=!1;if(u!=undefined)switch(u.action){case"isComplete":return ct(u.buffer);case"unmaskedvalue":return b=u.$input.data("_inputmask").isRTL,ei(u.$input,u.skipDatepickerCheck);case"mask":li(u.el);break;case"format":return a=n({}),a.data("_inputmask",{masksets:t,activeMasksetIndex:i,opts:r,isRTL:r.numericInput}),r.numericInput&&(r.isNumeric=r.numericInput,b=!0),ot(a,!1,!1,u.value.split(""),!0),l().join("")}}n.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{",end:"}"},groupmarker:{start:"(",end:")"},escapeChar:"\\",mask:null,oncomplete:n.noop,onincomplete:n.noop,oncleared:n.noop,repeat:0,greedy:!0,autoUnmask:!1,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},onKeyUp:n.noop,onKeyDown:n.noop,onBeforePaste:undefined,onUnMask:undefined,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:n.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1,isNumeric:!1,radixPoint:"",skipRadixDance:!1,rightAlignNumerics:!0,definitions:{"9":{validator:"[0-9]",cardinality:1},a:{validator:"[A-Za-zА-яЁё]",cardinality:1},"*":{validator:"[A-Za-zА-яЁё0-9]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],getMaskLength:function(n,t,i,r){var u=n.length;return t||(i=="*"?u=r.length+1:i>1&&(u+=n.length*(i-1))),u}},escapeRegex:function(n){return n.replace(new RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")},format:function(u,f){var e=n.extend(!0,{},n.inputmask.defaults,f);return i(e.alias,f,e),t(r(e),0,e,{action:"format",value:u})}};n.fn.inputmask=function(u,f){var e=n.extend(!0,{},n.inputmask.defaults,f),o,s=0,h,c;if(typeof u=="string")switch(u){case"mask":return(i(e.alias,f,e),o=r(e),o.length==0)?this:this.each(function(){t(n.extend(!0,{},o),0,e,{action:"mask",el:this})});case"unmaskedvalue":return h=n(this),c=this,h.data("_inputmask")?(o=h.data("_inputmask").masksets,s=h.data("_inputmask").activeMasksetIndex,e=h.data("_inputmask").opts,t(o,s,e,{action:"unmaskedvalue",$input:h})):h.val();case"remove":return this.each(function(){var r=n(this),i=this,u;if(r.data("_inputmask")){o=r.data("_inputmask").masksets;s=r.data("_inputmask").activeMasksetIndex;e=r.data("_inputmask").opts;i._valueSet(t(o,s,e,{action:"unmaskedvalue",$input:r,skipDatepickerCheck:!0}));r.removeData("_inputmask");r.unbind(".inputmask");r.removeClass("focus.inputmask");Object.getOwnPropertyDescriptor&&(u=Object.getOwnPropertyDescriptor(i,"value"));u&&u.get?i._valueGet&&Object.defineProperty(i,"value",{get:i._valueGet,set:i._valueSet}):document.__lookupGetter__&&i.__lookupGetter__("value")&&i._valueGet&&(i.__defineGetter__("value",i._valueGet),i.__defineSetter__("value",i._valueSet));try{delete i._valueGet;delete i._valueSet}catch(f){i._valueGet=undefined;i._valueSet=undefined}}});case"getemptymask":return this.data("_inputmask")?(o=this.data("_inputmask").masksets,s=this.data("_inputmask").activeMasksetIndex,o[s]._buffer.join("")):"";case"hasMaskedValue":return this.data("_inputmask")?!this.data("_inputmask").opts.autoUnmask:!1;case"isComplete":return o=this.data("_inputmask").masksets,s=this.data("_inputmask").activeMasksetIndex,e=this.data("_inputmask").opts,t(o,s,e,{action:"isComplete",buffer:this[0]._valueGet().split("")});case"getmetadata":return this.data("_inputmask")?(o=this.data("_inputmask").masksets,s=this.data("_inputmask").activeMasksetIndex,o[s].metadata):undefined;default:return(i(u,f,e)||(e.mask=u),o=r(e),o.length==0)?this:this.each(function(){t(n.extend(!0,{},o),s,e,{action:"mask",el:this})})}else{if(typeof u=="object")return(e=n.extend(!0,{},n.inputmask.defaults,u),i(e.alias,u,e),o=r(e),o.length==0)?this:this.each(function(){t(n.extend(!0,{},o),s,e,{action:"mask",el:this})});if(u==undefined)return this.each(function(){var t=n(this).attr("data-inputmask"),r;if(t&&t!="")try{t=t.replace(new RegExp("'","g"),'"');r=n.parseJSON("{"+t+"}");n.extend(!0,r,f);e=n.extend(!0,{},n.inputmask.defaults,r);i(e.alias,r,e);e.alias=undefined;n(this).inputmask(e)}catch(u){}})}}}})(jQuery);